/* =============================================================================================================================== */
/**
 * \file hashmap.h
 * \author Scott Kaplan <sfkaplan@amherst.edu>
 * \date 2021-Jul-20
 * \brief A open addressing hashmap implementation.
/* =============================================================================================================================== */



/* =============================================================================================================================== */
#if !defined (_HASHMAP_H)
#define _HASHMAP_H
/* =============================================================================================================================== */



/* =============================================================================================================================== */
/* TYPES */

/** The type of a page number. */
typedef uintptr_t page_num_t;

/** The structure for a single hash map entry. */
typedef struct hashmap_entry_struct {
  page_num_t page_num;
  int        original_perms;
  bool       unprotected;
} hashmap_entry_s;

/** The structure for an entire hash map. */
typedef struct hashmap_struct {
  hashmap_entry_s* storage;
  int              capacity;
  int              elements;
} hashmap_s;
/* =============================================================================================================================== */



/* =============================================================================================================================== */
/* FUNCTIONS */

void             hashmap_create (hashmap_s* hashmap);
hashmap_entry_s* hashmap_lookup (hashmap_s* hashmap, page_num_t page_num);
bool             hashmap_insert (hashmap_s* hashmap, hashmap_entry_s entry);
bool             hashmap_remove (hashmap_s* hashmap, page_num_t page_num);
/* =============================================================================================================================== */



/* =============================================================================================================================== */
#endif /* _HASHMAP_H */
/* =============================================================================================================================== */

